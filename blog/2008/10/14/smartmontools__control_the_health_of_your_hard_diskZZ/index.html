
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>smartmontools__control_the_health_of_your_hard_diskZZ - ChandleWEi's Blog</title>
  <meta name="author" content="Chandler Wei">

  
  <meta name="description" content="从 DebianTimes Article submitted by Noel David Torres Taño. Guess what? We still need you to submit good articles about software you like! One of the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ChandleWEi.github.io/blog/2008/10/14/smartmontools__control_the_health_of_your_hard_diskZZ">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ChandleWEi's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">ChandleWEi's Blog</a></h1>
  
    <h2>Welcome to our life, Roy</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ChandleWEi.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">smartmontools__control_the_health_of_your_hard_diskZZ</h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-14T00:00:00+08:00" pubdate data-updated="true">Oct 14<span>th</span>, 2008</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2></h2>

<p>从 <a href="https://www.google.com/reader/view/feed/http%3A%2F%2Ftimes.debian.net%2F%3Fformat%3Drss20.xml">DebianTimes</a></p>

<p><strong>Article submitted by Noel David Torres Taño. Guess what? We still need you to <a href="http://debaday.debian.net/contribute/">submit good articles about software you like</a>!</strong></p>

<p>One of the packages I manually install in every new installation is smartmontools. I’ve some expertise in managing computers and networks, and it is a fact that pirate hackers and software bugs are not the main cause of problems in small and medium installations. Hardware is.</p>

<p>Thus, you have hardware that can fails, and Murphy says that if it can fail, it will. The point is not to avoid hardware failures, which would be impossible, but to detect them early or even prevent them.</p>

<p>Particularly for hard disks, the tool in charge is <code>smartctl</code> from the package smartmontools. IDE disks (if they’re not of the age of dinosaurs) have an integrated self-testing tool called <a href="http://en.wikipedia.org/wiki/Self-Monitoring%2C_Analysis%2C_and_Reporting_Technology">SMART</a> which means “Self-Monitoring, Analysis and Reporting Technology”. Modern SCSI disks have it too if they’re SCSI 3 or newer. It happens that inside the disk chipset there are routines to check parameters of disk health: spin-up time, number of read failures, temperature, life elapsed… And all of those parameters are not only registered by the disk chipset, but they have designated security limits and both parameters and limits can be checked by software who access the disk using the appropriate I/O instructions.</p>

<p>And that software is <code>smartctl</code> , a piece of the smartmontools deb package. Of course, since they access the disk in a raw way, you need to be root to use these commands.</p>

<p><code>smartctl</code> can ask the disk for its smart identification:</p>

<h1>smartctl -i /dev/sda</h1>

<p>smartctl version 5.38 [i686-pc-linux-gnu] Copyright &copy; 2002-8 Bruce Allen<br/>
Home page is <a href="http://smartmontools.sourceforge.net/">http://smartmontools.sourceforge.net/</a></p>

<p>=== START OF INFORMATION SECTION ===<br/>
Model Family: Fujitsu MHV series<br/>
Device Model: FUJITSU MHV2060BH<br/>
Serial Number: NW10T652991F<br/>
Firmware Version: 00850028<br/>
User Capacity: 60,011,642,880 bytes<br/>
Device is: In smartctl database [for details use: -P show]<br/>
ATA Version is: 7<br/>
ATA Standard is: ATA/ATAPI-7 T13 1532D revision 4a<br/>
Local Time is: Mon May 12 02:39:31 2008 CEST<br/>
SMART support is: Available &ndash; device has SMART capability.<br/>
SMART support is: Enabled</p>

<p>More interesting, <code>smartctl</code> can ask the disk for its parameter values:</p>

<h1>smartctl -A /dev/sda</h1>

<p>smartctl version 5.38 [i686-pc-linux-gnu] Copyright &copy; 2002-8 Bruce Allen<br/>
Home page is <a href="http://smartmontools.sourceforge.net/">http://smartmontools.sourceforge.net/</a></p>

<p>=== START OF READ SMART DATA SECTION ===<br/>
SMART Attributes Data Structure revision number: 16<br/>
Vendor Specific SMART Attributes with Thresholds:<br/>
ID# ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE<br/>
1 Raw_Read_Error_Rate 0x000f 100 100 046 Pre-fail Always &ndash; 124253<br/>
2 Throughput_Performance 0x0004 100 100 000 Old_age Offline &ndash; 18284544<br/>
3 Spin_Up_Time 0x0003 100 100 025 Pre-fail Always &ndash; 0<br/>
4 Start_Stop_Count 0x0032 099 099 000 Old_age Always &ndash; 1199<br/>
5 Reallocated_Sector_Ct 0x0033 100 100 024 Pre-fail Always &ndash; 8589934592000<br/>
7 Seek_Error_Rate 0x000e 100 087 000 Old_age Always &ndash; 1761<br/>
8 Seek_Time_Performance 0x0004 100 100 000 Old_age Offline &ndash; 0<br/>
9 Power_On_Seconds 0x0032 079 079 000 Old_age Always &ndash; 10866h+57m+47s<br/>
10 Spin_Retry_Count 0x0012 100 100 000 Old_age Always &ndash; 0<br/>
12 Power_Cycle_Count 0x0032 100 100 000 Old_age Always &ndash; 1199<br/>
192 Power-Off_Retract_Count 0x0032 099 099 000 Old_age Always &ndash; 283<br/>
193 Load_Cycle_Count 0x0032 100 100 000 Old_age Always &ndash; 6953<br/>
194 Temperature_Celsius 0x0022 100 100 000 Old_age Always &ndash; 45 (Lifetime Min/Max 14/58)<br/>
195 Hardware_ECC_Recovered 0x001a 100 100 000 Old_age Always &ndash; 62<br/>
196 Reallocated_Event_Count 0x0032 100 100 000 Old_age Always &ndash; 459276288<br/>
197 Current_Pending_Sector 0x0012 100 100 000 Old_age Always &ndash; 0<br/>
198 Offline_Uncorrectable 0x0010 100 100 000 Old_age Offline &ndash; 0<br/>
199 UDMA_CRC_Error_Count 0x003e 200 200 000 Old_age Always &ndash; 0<br/>
200 Multi_Zone_Error_Rate 0x000e 100 082 000 Old_age Always &ndash; 22371<br/>
203 Run_Out_Cancel 0x0002 100 100 000 Old_age Always &ndash; 1533257648465<br/>
240 Head_Flying_Hours 0x003e 200 200 000 Old_age Always &ndash; 0</p>

<p>As you can see, there are some attributes marked as “Pre-fail”. If any of these attributes goes beyond its threshold, the disk is about to fail in hours, maybe minutes.</p>

<p>Even if there are more options to <code>smartctl</code> , the last ones I will comment here are -a and -t.</p>

<p>smartctl -t launches a disk test. It needs a parameter indicating the type of the test, and in the longest case it can last for tens of minutes and will check the electrical and mechanical performance as well as the read performance of the disk, going through all its surface. smartctl -a, in its turn, shows all available information about the disk, including self testing results. Since tests will span minutes or tens of minutes, we can not see them happening. All what we will get when launching tests is like:</p>

<h1>smartctl -t long /dev/sda</h1>

<p>smartctl version 5.38 [i686-pc-linux-gnu] Copyright &copy; 2002-8 Bruce Allen<br/>
Home page is <a href="http://smartmontools.sourceforge.net/">http://smartmontools.sourceforge.net/</a></p>

<p>=== START OF OFFLINE IMMEDIATE AND SELF-TEST SECTION ===<br/>
Sending command: &ldquo;Execute SMART Extended self-test routine immediately in<br/>
off-line mode&rdquo;.<br/>
Drive command &ldquo;Execute SMART Extended self-test routine immediately in<br/>
off-line mode&rdquo; successful.<br/>
Testing has begun.<br/>
Please wait 41 minutes for test to complete.<br/>
Test will complete after Mon May 12 05:44:03 2008</p>

<p>Use smartctl -X to abort test.</p>

<p>Here, we’re being informed that (maybe) we will get a slightly lower performance on the disk for the next 41 minutes, since the test has started. It is completely background, or better ‘underground’, since it does not happen under the kernel control at all: everything is happening internally to the disk, and all what we can get is the result.</p>

<p>smartctl -a, in turn, show a very large amount of SMART information about the disk: almost all stored SMART information parsed for us. It is usually better to use a more specific switch, see the man page for details.</p>

<p>Finally, I want to comment that there is a daemon in the smartmontools package, <code>smartd</code> , who can take care of doing tests for you. It works by running <code>smartctl</code> in a periodic way (typically every 30 minutes) and logging all errors and parameter value changes to the syslog. The default configuration in Debian will also mail root if there’s any problem detected. I will not explain here about it, because I want you to read its (short and easy) documentation, but remember that in order to use it you must enable it in <code>/etc/default/smartmontools</code> .</p>

<p>The smartmontools package has been available both in <a href="http://packages.debian.org/smartmontools">Debian</a> and <a href="http://packages.ubuntu.com/smartmontools">Ubuntu</a> since a long time ago.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">ChandleWEi</span></span>

      








  


<time datetime="2008-10-14T00:00:00+08:00" pubdate data-updated="true">Oct 14<span>th</span>, 2008</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://ChandleWEi.github.io/blog/2008/10/14/smartmontools__control_the_health_of_your_hard_diskZZ/" data-via="ChandleWEi" data-counturl="http://ChandleWEi.github.io/blog/2008/10/14/smartmontools__control_the_health_of_your_hard_diskZZ/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2008/10/10/js_%E9%A1%B5%E9%9D%A2%E5%86%85%E9%83%A8%E8%B7%B3%E8%BD%AC/" title="Previous Post: js_页面内部跳转">&laquo; js_页面内部跳转</a>
      
      
        <a class="basic-alignment right" href="/blog/2008/10/16/cool_theme_about_emacs/" title="Next Post: cool_theme_about_emacs">cool_theme_about_emacs &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/02/17/go-wait-example/">Go Wait Example</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/02/11/first-touch/">First Touch</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/06/01/%5B%E8%BD%AC%EF%BC%BDiphone_openvpn/">[转］iphone_openvpn</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/24/avplayer/">Avplayer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/05/07/delegation_/">Delegation_</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Chandler Wei -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
